<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Java MF Playground</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="flex h-screen bg-gray-100">

<!-- Fixed Titlebar -->
<div class="w-full h-12 bg-black text-white fixed z-10">
    <div class="flex items-center h-full px-6">
        <a href="index.html" class="text-lg no-underline text-white hover:text-gray-200">Java FM Playground</a>
    </div>
</div>

<!-- Fixed Sidebar -->
<div class="w-64 h-full bg-indigo-800 fixed pt-12">
    <nav class="text-white text-base font-semibold pt-3">
        <a href="list-foundation-models.html" class="bg-indigo-700 flex items-center text-white opacity-75 hover:opacity-100 py-4 pl-6 nav-item">
            <i class="fas fa-tachometer-alt mr-3"></i>
            List Foundation Models
        </a>
    </nav>
</div>

<!-- Content Area -->
<div class="ml-64 bg-gray-100 h-full pt-12">
    <div class="p-4">
        <h1 class="text-3xl">Foundation Models</h1>
        <div class="mt-4 -mb-3">
            <div id="model-list" style="visibility: collapse" class="not-prose relative bg-slate-50 rounded-xl overflow-hidden dark:bg-slate-800/25">
                <div class="absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,#fff,rgba(255,255,255,0.6))] dark:bg-grid-slate-700/25 dark:[mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]" style="background-position: 10px 10px;">

                </div>
                <div class="relative rounded-xl overflow-auto">
                    <div class="shadow-sm overflow-hidden my-4">
                        <table class="border-collapse table-auto w-full text-sm">
                            <thead>
                            <tr>
                                <th class="border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Provider</th>
                                <th class="border-b dark:border-slate-600 font-medium p-4 pr-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Model</th>
                            </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-slate-800" id="models">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="absolute inset-0 pointer-events-none border border-black/5 rounded-xl dark:border-white/5"></div>
            </div>
            <div id="model-details" style="visibility: collapse" class="not-prose relative bg-slate-50 rounded-xl overflow-hidden dark:bg-slate-800/25">
                <div class="absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,#fff,rgba(255,255,255,0.6))] dark:bg-grid-slate-700/25 dark:[mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]" style="background-position: 10px 10px;">

                </div>
                <div class="relative rounded-xl overflow-auto">
                    <div class="shadow-sm overflow-hidden my-4">
                        <table class="border-collapse table-auto w-full text-sm">
                            <thead>
                            <tr>
                                <th colspan="2" class="border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Model Details:</th>
                            </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-slate-800" id="model">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="absolute inset-0 pointer-events-none border border-black/5 rounded-xl dark:border-white/5"></div>
            </div>
        </div>

    </div>
</div>

<script src="config.js"></script>
<script>
    const apiEndpoint = frontendConfig.apiBaseUrl + 'foundation-models';

    function showFoundationModelDetails(modelId) {
        document.getElementById('model-list').style.visibility = 'collapse';

        fetch(apiEndpoint + '/' + modelId)
            .then((response) => response.json())
            .then((data) => {
                console.log(data);
                const table = document.getElementById('model');
                table.innerHTML = '';

                const providerRow = document.createElement('tr');
                const providerKey = document.createElement('td');
                providerKey.className = "border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400";
                providerKey.textContent = 'Provider:';
                const providerValue = document.createElement('td');
                providerValue.className = "border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400";
                providerValue.textContent = data.providerName;
                providerRow.appendChild(providerKey);
                providerRow.appendChild(providerValue);
                table.appendChild(providerRow);

                const nameRow = document.createElement('tr');
                const nameKey = document.createElement('td');
                nameKey.className = "border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400";
                nameKey.textContent = 'Model Name:';
                const nameValue = document.createElement('td');
                nameValue.className = "border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400";
                nameValue.textContent = data.modelName;
                nameRow.appendChild(nameKey);
                nameRow.appendChild(nameValue);
                table.appendChild(nameRow);

                const idRow = document.createElement('tr');
                const idKey = document.createElement('td');
                idKey.className = "border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400";
                idKey.textContent = 'Model ID:';
                const idValue = document.createElement('td');
                idValue.className = "border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400";
                idValue.textContent = data.modelId;
                idRow.appendChild(idKey);
                idRow.appendChild(idValue);
                table.appendChild(idRow);

                document.getElementById('model-details').style.visibility = 'visible';
            });
    }

    function showFoundationModelList() {
        document.getElementById('model-details').style.visibility = 'collapse';

        fetch(apiEndpoint)
            .then((response) => response.json())
            .then((data) => {
                const table = document.getElementById('models');
                table.innerHTML = '';

                data.foundationModels.forEach((item) => {
                    const row = document.createElement('tr');
                    row.className = "hover:bg-gray-200 active:bg-grey-300"

                    const provider = document.createElement('td');
                    provider.className = "border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400";
                    provider.textContent = item.provider;
                    row.appendChild(provider);

                    const name = document.createElement('td');
                    name.className = "border-b border-slate-100 dark:border-slate-700 p-4 pr-8 text-slate-500 dark:text-slate-400";
                    name.textContent = item.modelName;
                    row.appendChild(name);

                    row.onclick = function () {
                        showFoundationModelDetails(item.modelId)
                    };

                    row.style.cursor = 'pointer';

                    table.appendChild(row);
                });
                document.getElementById('model-list').style.visibility = 'visible';
            });
    }

    window.onload = function() {
        showFoundationModelList();
    }
</script>

</body>
</html>
